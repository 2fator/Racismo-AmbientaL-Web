<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Curso Interativo de Racismo Ambiental</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap');
  @import url('https://fonts.googleapis.com/icon?family=Material+Icons');

  /* Reset and global */
  * {
    box-sizing: border-box;
  }

  html {
    scroll-behavior: smooth;
  }

  body {
    margin: 0;
    font-family: 'Poppins', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: linear-gradient(135deg, #121212, #1e1e1e);
    color: #ececec;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
  }

  a {
    color: #82b1ff;
    text-decoration: none;
    transition: color 0.3s ease;
  }

  a:hover,
  a:focus {
    color: #448aff;
    outline: none;
  }

  h1, h2, h3 {
    font-weight: 700;
    margin-bottom: 16px;
    line-height: 1.2;
    color: #bbdefb;
  }

  h1 {
    font-size: 2.75rem;
  }

  h2 {
    font-size: 2rem;
  }

  h3 {
    font-size: 1.5rem;
  }

  p, li {
    font-weight: 400;
    font-size: 1rem;
    line-height: 1.5;
    margin-bottom: 16px;
  }

  ul {
    padding-left: 1.25rem;
    margin-bottom: 20px;
  }

  li {
    margin-bottom: 10px;
  }

  header, footer {
    background-color: #263238;
    color: #ececec;
    padding: 24px 20px;
    text-align: center;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.7);
  }

  header h1 {
    margin: 0;
  }

  footer p {
    margin: 0;
    font-weight: 500;
    font-size: 0.9rem;
    color: #90a4ae;
  }

  nav {
    background-color: #37474f;
    padding: 12px 20px;
  }

  nav ul {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    list-style: none;
    gap: 30px;
    margin: 0;
    padding: 0;
  }

  nav li {
  }

  nav a {
    color: #b0bec5;
    font-weight: 600;
    font-size: 1rem;
    padding: 8px 14px;
    border-radius: 12px;
    display: inline-flex;
    align-items: center;
    gap: 6px;
    transition: background-color 0.3s ease, color 0.3s ease;
    position: relative;
  }

  nav a:hover,
  nav a:focus {
    background-color: #607d8b;
    color: #fff;
    outline: none;
  }

  main {
    flex-grow: 1;
    max-width: 1080px;
    margin: 32px auto 64px;
    padding: 0 20px;
    width: 100%;
    display: flex;
    flex-direction: column;
    gap: 48px;
  }

  section {
    background-color: #263238aa;
    padding: 32px 40px;
    border-radius: 18px;
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.85);
    backdrop-filter: saturate(200%) blur(20px);
  }

  .section-content {
    max-width: 740px;
    margin: 0 auto;
  }

  /* Buttons used for games nav */
  .games-nav {
    display: flex;
    flex-wrap: wrap;
    gap: 18px;
    justify-content: center;
    margin-bottom: 28px;
  }

  .games-nav button {
    display: flex;
    align-items: center;
    gap: 8px;
    background: linear-gradient(135deg,#448aff,#82b1ff);
    border: none;
    color: #fff;
    font-weight: 700;
    border-radius: 30px;
    padding: 14px 26px;
    font-size: 1rem;
    cursor: pointer;
    box-shadow: 0 5px 15px rgba(66, 165, 245,.6);
    user-select: none;
    transition:
      background-color 0.3s ease,
      box-shadow 0.3s ease,
      transform 0.3s ease;
  }

  .games-nav button:hover,
  .games-nav button:focus {
    background: linear-gradient(135deg,#2962ff,#448aff);
    box-shadow: 0 8px 30px rgba(66, 165, 245, .9);
    transform: scale(1.08);
    outline: none;
  }

  /* Material icon style */
  .material-icons {
    font-size: 20px;
    vertical-align: middle;
  }

  /* Container for game area */
  .game-container {
    max-width: 720px;
    margin: 0 auto;
    background-color: #1e2a33;
    padding: 30px 36px;
    border-radius: 16px;
    box-shadow: 0 10px 24px rgba(0, 0, 0, 0.85);
    color: #ececec;
  }

  /* QUIZ Game */
  .quiz-question {
    font-size: 1.4rem;
    margin-bottom: 24px;
    font-weight: 600;
  }
  .quiz-options {
    list-style: none;
    padding: 0;
    margin: 0 0 24px 0;
    display: flex;
    flex-direction: column;
    gap: 14px;
  }
  .quiz-options button {
    background-color: #37474f;
    border: none;
    border-radius: 12px;
    padding: 14px 24px;
    color: #ececec;
    font-weight: 600;
    font-size: 1rem;
    cursor: pointer;
    box-shadow: inset 0 0 8px #0006;
    transition: background-color 0.25s ease, box-shadow 0.25s ease;
    text-align: left;
    user-select: none;
  }
  .quiz-options button:hover,
  .quiz-options button:focus {
    background-color: #607d8b;
    outline: none;
  }
  .quiz-options button.correct {
    background-color: #2e7d32 !important;
    box-shadow: 0 0 10px #2e7d32cc !important;
  }
  .quiz-options button.wrong {
    background-color: #c62828 !important;
    box-shadow: 0 0 10px #c62828cc !important;
  }
  .quiz-result {
    font-weight: 700;
    font-size: 1.3rem;
    margin-top: 18px;
    text-align: center;
    color: #82b1ff;
  }
  .quiz-nav-btns {
    display: flex;
    justify-content: center;
    gap: 20px;
  }
  .quiz-nav-btns button {
    background: linear-gradient(135deg,#2196f3,#90caf9);
    color: #fff;
    box-shadow: 0 5px 15px rgba(33, 150, 243, 0.7);
  }
  .quiz-nav-btns button:disabled {
    background-color: #444c54;
    box-shadow: none;
    cursor: not-allowed;
  }

  /* MEMORY Game */
  .memory-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit,minmax(98px,1fr));
    gap: 18px;
    justify-items: center;
  }
  .memory-card {
    width: 98px;
    height: 128px;
    perspective: 700px;
    cursor: pointer;
    outline-offset: 3px;
    border-radius: 14px;
  }
  .memory-card:focus {
    outline: 3px solid #448aff;
  }
  .memory-inner {
    position: relative;
    width: 100%;
    height: 100%;
    border-radius: 14px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.4);
    transition: transform 0.6s cubic-bezier(0.4,0,0.2,1);
    transform-style: preserve-3d;
  }
  .memory-inner.flipped {
    transform: rotateY(180deg);
  }
  .memory-front, .memory-back {
    position: absolute;
    width: 100%;
    height: 100%;
    backface-visibility: hidden;
    border-radius: 14px;
    user-select: none;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 600;
    padding: 14px;
  }
  .memory-front {
    background: #448aff;
    color: #fff;
    font-size: 1.1rem;
    text-align: center;
  }
  .memory-back {
    background: #eceff1;
    color: #263238;
    font-size: 0.9rem;
    line-height: 1.3;
    text-align: center;
    transform: rotateY(180deg);
  }
  .memory-status {
    margin-top: 16px;
    font-weight: 600;
    font-size: 1.1rem;
    text-align: center;
    color: #82b1ff;
  }
  .memory-restart {
    margin: 24px auto 0;
    display: block;
    background: #448aff;
    border-radius: 30px;
    padding: 12px 28px;
    font-weight: 700;
    box-shadow: 0 5px 15px rgba(66, 133, 244, 0.75);
    letter-spacing: 0.02em;
    user-select: none;
    cursor: pointer;
    transition: transform 0.3s ease;
  }
  .memory-restart:hover,
  .memory-restart:focus {
    outline: none;
    transform: scale(1.06);
    box-shadow: 0 7px 22px rgba(66, 133, 244, 1);
  }

  /* SIMULATION Game */
  .sim-question {
    font-weight: 700;
    font-size: 1.3rem;
    margin-bottom: 20px;
  }
  .sim-options {
    list-style: none;
    padding: 0;
    margin-bottom: 24px;
    display: flex;
    flex-direction: column;
    gap: 14px;
  }
  .sim-options button {
    background: #607d8b;
    border: none;
    border-radius: 12px;
    padding: 14px 20px;
    color: #ececec;
    font-weight: 600;
    font-size: 1rem;
    cursor: pointer;
    box-shadow: inset 0 0 8px #0007;
    user-select: none;
    transition: background-color 0.3s ease;
  }
  .sim-options button:hover,
  .sim-options button:focus {
    background: #90a4ae;
    color: #263238;
    outline: none;
  }
  .sim-options button:disabled {
    background-color: #455a64;
    cursor: not-allowed;
    color: #9e9e9e;
  }
  .sim-explanation {
    font-style: italic;
    font-size: 1rem;
    margin-top: 18px;
    color: #82b1ff;
    min-height: 58px;
  }
  .sim-nav-btn {
    background: #448aff;
    border-radius: 32px;
    padding: 14px 38px;
    font-weight: 700;
    letter-spacing: 0.05em;
    color: #fff;
    border: none;
    font-size: 1rem;
    cursor: pointer;
    box-shadow: 0 5px 15px rgba(66, 133, 244, 0.75);
    transition: transform 0.3s ease;
    user-select: none;
    margin: 0 auto;
    display: block;
  }
  .sim-nav-btn:disabled {
    background: #455a64;
    box-shadow: none;
    cursor: not-allowed;
  }
  .sim-nav-btn:hover:not(:disabled),
  .sim-nav-btn:focus:not(:disabled) {
    outline: none;
    transform: scale(1.05);
    box-shadow: 0 7px 22px rgba(66, 133, 244, 1);
  }

  /* WORD SEARCH Game */
  .wordsearch-container {
    max-width: 600px;
    margin: 0 auto;
    text-align: center;
    user-select: none;
  }
  .wordsearch-grid {
    display: grid;
    grid-template-columns: repeat(10, 1fr);
    gap: 6px;
    margin-top: 1rem;
    cursor: pointer;
  }
  .ws-cell {
    border: 1px solid #448aff;
    padding: 14px 0;
    font-weight: 700;
    color: #bbdefb;
    user-select: none;
    border-radius: 10px;
    font-size: 1.2rem;
    line-height: 1;
    transition: background-color 0.25s ease, color 0.25s ease;
  }
  .ws-cell:hover,
  .ws-cell:focus {
    background-color: #2962ff;
    outline: none;
    color: #ffffffcc;
  }
  .ws-cell.selected {
    background-color: #2962ff;
    color: #fff;
  }
  .ws-cell.found {
    background-color: #43a047;
    color: #fff;
    cursor: default;
  }
  .word-list {
    margin-top: 30px;
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 18px;
  }
  .word-list span {
    background: #607d8b;
    color: #ececec;
    padding: 8px 20px;
    border-radius: 30px;
    font-weight: 600;
    font-size: 1rem;
    user-select: none;
    transition: background-color 0.3s ease;
  }
  .word-list span.found {
    background-color: #43a047;
    color: #eef4f7;
    box-shadow: 0 0 15px #64dd17aa;
  }
  .wordsearch-instructions {
    font-style: italic;
    font-size: 0.9rem;
    margin-top: 10px;
    color: #90a4ae;
  }

  /* Responsive */
  @media (max-width: 680px) {
    nav ul {
      gap: 16px;
    }
    main {
      margin: 20px auto 48px;
      padding: 0 16px;
    }
    section {
      padding: 24px 28px;
    }
  }

</style>
</head>
<body>
<header>
  <h1 tabindex="0">Curso Interativo de Racismo Ambiental</h1>
  <p>Aprenda sobre o impacto do racismo ambiental e saiba como promover Justiça Ambiental!</p>
</header>
<nav aria-label="Menu principal">
  <ul>
    <li><a href="#introducao" aria-label="Ir para Introdução">Introdução <span class="material-icons" aria-hidden="true">info</span></a></li>
    <li><a href="#impactos" aria-label="Ir para Impactos">Impactos <span class="material-icons" aria-hidden="true">warning</span></a></li>
    <li><a href="#jogos" aria-label="Ir para Jogos interativos">Jogos <span class="material-icons" aria-hidden="true">videogame_asset</span></a></li>
    <li><a href="#acoes" aria-label="Ir para Ações e Soluções">Ações <span class="material-icons" aria-hidden="true">lightbulb</span></a></li>
    <li><a href="#conclusao" aria-label="Ir para Conclusão do curso">Conclusão <span class="material-icons" aria-hidden="true">flag</span></a></li>
  </ul>
</nav>
<main>
  <section id="introducao" tabindex="0" aria-label="Introdução ao Racismo Ambiental" class="section-content">
    <h2>Introdução ao Racismo Ambiental</h2>
    <p>
      O racismo ambiental é a discriminação sistemática que resulta em comunidades racializadas sendo desproporcionalmente expostas a riscos ambientais prejudiciais.
    </p>
    <p>
      Esta desigualdade está enraizada em legados históricos e estruturas sociais que segregam pessoas em bairros ou regiões que suportam o peso de poluição, falta de saneamento e degradação ambiental.
    </p>
    <p>
      A comprovação científica dessas injustiças é essencial para política pública e ativismo. Respeitar e garantir direitos ambientais também é um compromisso social e humano.
    </p>
  </section>

  <section id="impactos" tabindex="0" aria-label="Impactos do Racismo Ambiental" class="section-content">
    <h2>Impactos do Racismo Ambiental</h2>
    <p>Os impactos do racismo ambiental se manifestam profundamente na qualidade de vida e no acesso a oportunidades:</p>
    <ul>
      <li><strong>Saúde comprometida:</strong> Maior incidência de doenças respiratórias, câncer e problemas crônicos em comunidades afetadas.</li>
      <li><strong>Desigualdade social aumentada:</strong> Falta de acesso a educação, infraestrutura básica, serviços públicos e oportunidades econômicas.</li>
      <li><strong>Perda cultural:</strong> Deslocamentos forçados e degradação ambiental levam à perda de saberes tradicionais de povos indígenas e comunidades locais.</li>
      <li><strong>Ambiente degradado:</strong> Áreas afetadas têm solos contaminados, água poluída e menor biodiversidade, agravando a sustentabilidade futura.</li>
    </ul>
    <p>
      É fundamental que informações detalhadas, políticas públicas e mobilizações sociais abordem essas desigualdades enfrentadas por grupos vulneráveis.
    </p>
  </section>

  <section id="jogos" tabindex="0" aria-label="Jogos Interativos sobre Racismo Ambiental" class="section-content">
    <h2>Jogos Interativos</h2>
    <p>Explore cada jogo para testar seu conhecimento e entender melhor as complexidades do racismo ambiental.</p>
    <div class="games-nav" role="tablist" aria-label="Navegação dos jogos educativos">
      <button role="tab" aria-selected="true" aria-controls="quizGame" id="btnQuiz" tabindex="0" class="material-icons">quiz</button>
      <button role="tab" aria-selected="false" aria-controls="memoryGame" id="btnMemory" tabindex="-1" class="material-icons">memory</button>
      <button role="tab" aria-selected="false" aria-controls="simulationGame" id="btnSimulation" tabindex="-1" class="material-icons">sports_esports</button>
      <button role="tab" aria-selected="false" aria-controls="wordSearchGame" id="btnWordSearch" tabindex="-1" class="material-icons">find_in_page</button>
    </div>

    <div id="gamesArea">
      <!-- QUIZ -->
      <section id="quizGame" class="game-container" role="tabpanel" tabindex="0" aria-labelledby="btnQuiz" aria-hidden="false">
        <h3>Quiz sobre Racismo Ambiental</h3>
        <p class="quiz-question" id="quizQuestion"></p>
        <ul class="quiz-options" id="quizOptions" role="listbox" aria-activedescendant="" tabindex="0" aria-label="Opções de resposta"></ul>
        <p id="quizFeedback" aria-live="assertive" class="quiz-result"></p>
        <div class="quiz-nav-btns">
          <button id="quizPrevBtn" aria-label="Pergunta Anterior" disabled>Anterior</button>
          <button id="quizNextBtn" aria-label="Próxima Pergunta">Próxima</button>
        </div>
      </section>

      <!-- MEMORY -->
      <section id="memoryGame" class="game-container hidden" role="tabpanel" tabindex="0" aria-labelledby="btnMemory" aria-hidden="true">
        <h3>Jogo de Memória: Combine os Fatos</h3>
        <div class="memory-grid" id="memoryGrid" role="grid" aria-label="Grades de cartas de memória"></div>
        <p id="memoryStatus" class="memory-status" aria-live="assertive" aria-atomic="true"></p>
        <button id="memoryRestartBtn" class="memory-restart" aria-label="Reiniciar o jogo de memória">Reiniciar Jogo</button>
      </section>

      <!-- SIMULATION -->
      <section id="simulationGame" class="game-container hidden" role="tabpanel" tabindex="0" aria-labelledby="btnSimulation" aria-hidden="true">
        <h3>Simulação de Decisões Ambientais</h3>
        <p class="sim-question" id="simQuestion"></p>
        <ul class="sim-options" id="simOptions" role="listbox" aria-label="Opções de decisão"></ul>
        <p class="sim-explanation" id="simExplanation" aria-live="polite" aria-atomic="true"></p>
        <button id="simulationNext" class="sim-nav-btn" disabled aria-label="Próxima decisão">Próxima</button>
        <button id="simulationRestart" class="sim-nav-btn" style="margin-top:10px; background-color:#689f38;" aria-label="Reiniciar simulação">Reiniciar</button>
      </section>

      <!-- WORD SEARCH -->
      <section id="wordSearchGame" class="game-container hidden" role="tabpanel" tabindex="0" aria-labelledby="btnWordSearch" aria-hidden="true">
        <h3>Caça-Palavras sobre Racismo Ambiental</h3>
        <div class="wordsearch-container">
          <div id="wordsearchGrid" class="wordsearch-grid" role="grid" aria-label="Grid do caça-palavras"></div>
          <p class="wordsearch-instructions">Selecione letras adjacentes para formar palavras relacionadas.</p>
          <div id="wordList" class="word-list" aria-label="Lista de palavras para encontrar"></div>
        </div>
      </section>
    </div>
  </section>

  <section id="acoes" tabindex="0" aria-label="Ações e soluções para combater o Racismo Ambiental" class="section-content">
    <h2>Ações e Soluções</h2>
    <p>Combater o racismo ambiental envolve diversas frentes:</p>
    <ul>
      <li><strong>Políticas Inclusivas e Justas:</strong> elaborar leis que protejam as comunidades vulneráveis ambientalmente afetadas.</li>
      <li><strong>Educação Integral:</strong> incentivar conhecimento crítico e participação das comunidades.</li>
      <li><strong>Mobilização Social:</strong> movimentos populares que pressionam por mudanças e visibilidade para os afetados.</li>
      <li><strong>Infraestrutura e Saúde:</strong> investimento em saneamento, água limpa e serviços para as comunidades.</li>
      <li><strong>Participação Comunitária:</strong> garantir a voz das comunidades na tomada de decisões ambientais.</li>
    </ul>
    <p>Exemplos inspiradores de ativismo e ações bem-sucedidas são fonte de esperança e aprendizagem para avançarmos juntos.</p>
    <p>Conheça mais: <a href="https://www.amentebemdia.com.br/tag/justica-ambiental/" target="_blank" rel="noopener noreferrer">Justiça Ambiental</a>, <a href="https://uneafro.org.br/" target="_blank" rel="noopener noreferrer">Uneafro Brasil</a></p>
  </section>

  <section id="conclusao" tabindex="0" aria-label="Conclusão do curso de racismo ambiental" class="section-content">
    <h2>Conclusão</h2>
    <p>O racismo ambiental é injustiça que requer conscientização e ação.</p>
    <p>Este curso trouxe entendimento sobre causas, impactos e soluções, junto de ferramentas lúdicas para aprender interativamente.</p>
    <p>Com conhecimento e atitude, você pode fazer a diferença. A justiça ambiental é responsabilidade de todos nós.</p>
    <p>Agradecemos seu interesse e participação!</p>
  </section>
</main>
<footer>
  <p>IEMA TAMANCÃO - 2025</p>
</footer>

<script>
  // ------- UTILITIES -------
  function toggleVisibility(element, show) {
    if(show) {
      element.classList.remove('hidden');
      element.setAttribute('aria-hidden', 'false');
    } else {
      element.classList.add('hidden');
      element.setAttribute('aria-hidden', 'true');
    }
  }
  function setTabSelected(buttons, selectedIndex) {
    buttons.forEach((btn,i) => {
      if(i === selectedIndex){
        btn.setAttribute('aria-selected', 'true');
        btn.tabIndex = 0;
        btn.focus();
      } else {
        btn.setAttribute('aria-selected', 'false');
        btn.tabIndex = -1;
      }
    });
  }
  // ------- GAMES NAVIGATION -------
  const btnQuiz = document.getElementById('btnQuiz');
  const btnMemory = document.getElementById('btnMemory');
  const btnSimulation = document.getElementById('btnSimulation');
  const btnWordSearch = document.getElementById('btnWordSearch');
  const gamesTabs = [btnQuiz, btnMemory, btnSimulation, btnWordSearch];

  const quizGame = document.getElementById('quizGame');
  const memoryGame = document.getElementById('memoryGame');
  const simulationGame = document.getElementById('simulationGame');
  const wordSearchGame = document.getElementById('wordSearchGame');

  const gamesPanels = [quizGame, memoryGame, simulationGame, wordSearchGame];

  function activateGame(index) {
    gamesPanels.forEach((game,i) => {
      toggleVisibility(game, i === index);
      game.setAttribute('aria-hidden', i !== index);
      game.setAttribute('tabindex', i === index ? '0' : '-1');
    });
    setTabSelected(gamesTabs, index);
  }

  btnQuiz.addEventListener('click', () => {
    activateGame(0);
    startQuiz();
  });
  btnMemory.addEventListener('click', () => {
    activateGame(1);
    startMemoryGame();
  });
  btnSimulation.addEventListener('click', () => {
    activateGame(2);
    startSimulation();
  });
  btnWordSearch.addEventListener('click', () => {
    activateGame(3);
    startWordSearch();
  });

  // Keyboard support for game tabs
  gamesTabs.forEach((btn, i) => {
    btn.addEventListener('keydown', e => {
      if(e.key === 'ArrowRight') {
        e.preventDefault();
        let next = (i + 1) % gamesTabs.length;
        gamesTabs[next].focus();
      } else if(e.key === 'ArrowLeft') {
        e.preventDefault();
        let prev = (i - 1 + gamesTabs.length) % gamesTabs.length;
        gamesTabs[prev].focus();
      } else if(e.key === 'Enter' || e.key === ' ') {
        e.preventDefault();
        btn.click();
      }
    });
  });

  // Initialize to quiz active
  activateGame(0);

  // -------------- QUIZ GAME --------------
  const quizData = [
    {
      question: "O que é racismo ambiental?",
      options: [
        "Processo em que comunidades marginalizadas são desproporcionalmente afetadas por problemas ambientais",
        "Uma teoria ambiental que defende a igualdade ecológica",
        "Políticas públicas que cuidam do meio ambiente",
        "Um tipo de poluição sonora"
      ],
      correctIndex: 0,
    },
    {
      question: "Quais comunidades sofrem mais com o racismo ambiental?",
      options: [
        "Comunidades indígenas e periféricas",
        "Grandes capitais urbanas",
        "Áreas rurais isoladas sem população",
        "Todos são igualmente impactados"
      ],
      correctIndex: 0,
    },
    {
      question: "Qual é um dos principais impactos do racismo ambiental?",
      options: [
        "Desigualdade na saúde pública",
        "Crescimento econômico acelerado",
        "Avanço da indústria tecnológica",
        "Aumento de espécies preservadas"
      ],
      correctIndex: 0,
    },
    {
      question: "Como podemos combater o racismo ambiental?",
      options: [
        "Criação e aplicação de políticas inclusivas e ativismo social",
        "Ignorando o problema para não causar conflitos",
        "Construindo mais indústrias em áreas protegidas",
        "Reduzindo a educação ambiental"
      ],
      correctIndex: 0,
    }
  ];

  const quizQuestion = document.getElementById('quizQuestion');
  const quizOptions = document.getElementById('quizOptions');
  const quizFeedback = document.getElementById('quizFeedback');
  const quizPrevBtn = document.getElementById('quizPrevBtn');
  const quizNextBtn = document.getElementById('quizNextBtn');

  let currentQuizIndex = 0;
  let quizScore = 0;
  let quizAnswered = false;

  function renderQuiz() {
    const q = quizData[currentQuizIndex];
    quizQuestion.textContent = `Q${currentQuizIndex + 1}: ${q.question}`;
    quizOptions.innerHTML = '';
    quizFeedback.textContent = '';
    quizAnswered = false;
    quizPrevBtn.disabled = currentQuizIndex === 0;
    quizNextBtn.disabled = true;

    q.options.forEach((opt, i) => {
      const li = document.createElement('li');
      const btn = document.createElement('button');
      btn.type = 'button';
      btn.textContent = opt;
      btn.classList.add('quiz-option');
      btn.setAttribute('aria-pressed', 'false');
      btn.addEventListener('click', () => {
        if(quizAnswered) return;
        quizAnswered = true;
        const correctIdx = q.correctIndex;

        if(i === correctIdx){
          btn.classList.add('correct');
          quizFeedback.textContent = 'Resposta correta!';
          quizScore++;
        } else {
          btn.classList.add('wrong');
          quizFeedback.textContent = `Resposta incorreta! A correta é: "${q.options[correctIdx]}"`;
        }

        [...quizOptions.children].forEach(liChild => {
          let btnChild = liChild.querySelector('button');
          btnChild.disabled = true;
          btnChild.setAttribute('aria-pressed', btnChild === btn ? 'true' : 'false');
          if((quizOptions.children[i] !== liChild) && btnChild.textContent === q.options[correctIdx]){
            btnChild.classList.add('correct');
          }
        });

        quizNextBtn.disabled = false;
        quizNextBtn.focus();
      });
      li.appendChild(btn);
      quizOptions.appendChild(li);
    });
  }

  quizPrevBtn.addEventListener('click', () => {
    if(currentQuizIndex > 0){
      currentQuizIndex--;
      renderQuiz();
    }
  });

  quizNextBtn.addEventListener('click', () => {
    if(currentQuizIndex < quizData.length -1){
      currentQuizIndex++;
      renderQuiz();
    } else {
      quizQuestion.textContent = `Quiz completo! Sua pontuação: ${quizScore} de ${quizData.length}`;
      quizOptions.innerHTML = '';
      quizFeedback.textContent = '';
      quizPrevBtn.disabled = true;
      quizNextBtn.disabled = true;
    }
  });

  function startQuiz() {
    currentQuizIndex = 0;
    quizScore = 0;
    renderQuiz();
  }

  // ---------- MEMORY GAME ----------
  const memoryGrid = document.getElementById('memoryGrid');
  const memoryStatus = document.getElementById('memoryStatus');
  const memoryRestartBtn = document.getElementById('memoryRestartBtn');

  const memoryPairs = [
    {id: 1, front: "Comunidades indígenas", back: "São afetadas pelo racismo ambiental"},
    {id: 2, front: "Poluição", back: "Afeta desproporcionalmente áreas pobres"},
    {id: 3, front: "Doenças respiratórias", back: "Consequência da má qualidade ambiental"},
    {id: 4, front: "Ativismo", back: "Ferramenta essencial para a justiça ambiental"},
    {id: 5, front: "Justiça Ambiental", back: "O objetivo de combater o racismo ambiental"},
    {id: 6, front: "Desigualdade Social", back: "Amplificada pelo racismo ambiental"},
  ];

  let memoryCards = [];
  let memoryFlipped = [];
  let memoryMatches = 0;
  let memoryLock = false;

  function shuffleArray(arr) {
    for(let i = arr.length -1; i>0; i--){
      let j = Math.floor(Math.random() * (i+1));
      [arr[i], arr[j]] = [arr[j], arr[i]];
    }
    return arr;
  }

  function createMemoryCard(pair) {
    const card = document.createElement('div');
    card.className = 'memory-card';
    card.setAttribute('tabindex', '0');
    card.setAttribute('role', 'button');
    card.setAttribute('aria-pressed', 'false');
    card.dataset.id = pair.id;

    const inner = document.createElement('div');
    inner.className = 'memory-inner';

    const front = document.createElement('div');
    front.className = 'memory-front';
    front.textContent = pair.front;

    const back = document.createElement('div');
    back.className = 'memory-back';
    back.textContent = pair.back;

    inner.appendChild(front);
    inner.appendChild(back);
    card.appendChild(inner);

    // Flip logic
    card.addEventListener('click', () => flipMemoryCard(card));
    card.addEventListener('keydown', e => {
      if(e.key === 'Enter' || e.key === ' ') {
        e.preventDefault();
        flipMemoryCard(card);
      }
    });
    return card;
  }

  function flipMemoryCard(card){
    if(memoryLock) return;
    if(memoryFlipped.includes(card) || card.classList.contains('matched')) return;

    card.classList.add('flipped');
    card.setAttribute('aria-pressed', 'true');
    memoryFlipped.push(card);

    if(memoryFlipped.length === 2){
      memoryLock = true;
      setTimeout(checkMemoryMatch, 1000);
    }
  }

  function checkMemoryMatch(){
    const [card1, card2] = memoryFlipped;
    if(card1.dataset.id === card2.dataset.id){
      card1.classList.add('matched');
      card2.classList.add('matched');
      memoryMatches++;
      memoryStatus.textContent = `Paare encontrados: ${memoryMatches} de ${memoryPairs.length}`;
      if(memoryMatches === memoryPairs.length){
        memoryStatus.textContent = "Parabéns! Você completou o jogo de memória!";
      }
    } else {
      card1.classList.remove('flipped');
      card2.classList.remove('flipped');
      card1.setAttribute('aria-pressed', 'false');
      card2.setAttribute('aria-pressed', 'false');
    }
    memoryFlipped = [];
    memoryLock = false;
  }

  function startMemoryGame() {
    memoryMatches = 0;
    memoryFlipped = [];
    memoryLock = false;
    memoryStatus.textContent = 'Encontre todos os pares.';
    // Duplicate and shuffle cards
    memoryCards = memoryPairs.concat(memoryPairs);
    shuffleArray(memoryCards);
    memoryGrid.innerHTML = '';
    memoryCards.forEach(pair => {
      let card = createMemoryCard(pair);
      memoryGrid.appendChild(card);
    });
    memoryGrid.querySelector('.memory-card').focus();
  }

  memoryRestartBtn.addEventListener('click', () => {
    startMemoryGame();
  });

  // ----------- SIMULATION -----------

  const simQuestion = document.getElementById('simQuestion');
  const simOptions = document.getElementById('simOptions');
  const simExplanation = document.getElementById('simExplanation');
  const simulationNext = document.getElementById('simulationNext');
  const simulationRestart = document.getElementById('simulationRestart');

  const simulationData = [
    {
      id: 1,
      question: 'Você é um prefeito. Uma indústria quer instalar uma fábrica próxima a uma comunidade pobre. O que você faz?',
      options: [
        {text: 'Autorizar para gerar empregos.', impact: -1},
        {text: 'Consultar a comunidade antes de decidir.', impact: 1},
        {text: 'Proibir para proteger o meio ambiente.', impact: 2}
      ],
      explanation: 'Consultar a comunidade ajuda a preservar seus direitos e decidir com responsabilidade, equilibrando riscos e benefícios.'
    },
    {
      id: 2,
      question: 'Há contaminação na água da cidade. Como agir?',
      options: [
        {text: 'Investir em saneamento para a área afetada.', impact: 2},
        {text: 'Ignorar e esperar solução natural.', impact: -1},
        {text: 'Forçar remoção da comunidade da área.', impact: -2}
      ],
      explanation: 'Investir em saneamento combate a raiz da contaminação e protege a saúde da população.'
    },
    {
      id: 3,
      question: 'Como envolver a comunidade nas decisões ambientais?',
      options: [
        {text: 'Realizar audiências públicas participativas.', impact: 2},
        {text: 'Tomar decisões sozinho para agilidade.', impact: -1},
        {text: 'Consultar apenas grandes empresários.', impact: -2}
      ],
      explanation: 'Audiências promovem inclusão e decisões mais justas para todos os afetados.'
    }
  ];

  let currentSimIndex = 0;
  let simScore = 0;
  let simAnswered = false;

  function renderSimulationStep() {
    const step = simulationData[currentSimIndex];

    simQuestion.textContent = step.question;
    simOptions.innerHTML = '';
    simExplanation.textContent = '';
    simulationNext.disabled = true;
    simAnswered = false;

    step.options.forEach((opt, i) => {
      const li = document.createElement('li');
      const btn = document.createElement('button');
      btn.type = 'button';
      btn.textContent = opt.text;
      btn.className = 'sim-option';
      btn.setAttribute('aria-pressed', 'false');
      btn.addEventListener('click', () => {
        if(simAnswered) return;
        simAnswered = true;

        // Mark buttons disabled except clicked
        [...simOptions.querySelectorAll('button')].forEach(b => {
          b.disabled = true;
          if(b === btn) {
            b.classList.add('selected');
            b.setAttribute('aria-pressed', 'true');
          } else {
            b.setAttribute('aria-pressed', 'false');
          }
        });
        simScore += (opt.impact > 0) ? opt.impact : 0;
        simExplanation.textContent = step.explanation;

        simulationNext.disabled = false;
        simulationNext.focus();
      });
      li.appendChild(btn);
      simOptions.appendChild(li);
    });
  }

  simulationNext.addEventListener('click', () => {
    if(currentSimIndex < simulationData.length -1){
      currentSimIndex++;
      renderSimulationStep();
    } else {
      simQuestion.textContent = `Fim da simulação! Sua pontuação: ${simScore} pontos.`;
      simOptions.innerHTML = '';
      simExplanation.textContent = '';
      simulationNext.disabled = true;
      simulationRestart.style.display = 'block';
      simulationRestart.focus();
    }
  });

  simulationRestart.addEventListener('click', () => {
    currentSimIndex = 0;
    simScore = 0;
    simulationRestart.style.display = 'none';
    renderSimulationStep();
    simulationNext.disabled = true;
  });

  function startSimulation() {
    currentSimIndex = 0;
    simScore = 0;
    simulationRestart.style.display = 'none';
    renderSimulationStep();
    toggleVisibility(simulationGame, true);
    setTimeout(() => {
      const firstBtn = simOptions.querySelector('button');
      if(firstBtn) firstBtn.focus();
    }, 300);
  }

  // ----------- WORD SEARCH -----------

  const wordSearchWords = [
    'POLUIÇÃO',
    'JUSTIÇA',
    'SAÚDE',
    'COMUNIDADE',
    'MEIOAMBIENTE',
    'ATIVISMO',
    'IGUALDADE',
    'RESILIÊNCIA',
    'DIVERSIDADE',
    'SUSTENTABILIDADE'
  ];

  const wordsearchGridDiv = document.getElementById('wordsearchGrid');
  const wordListDiv = document.getElementById('wordList');
  const gridSize = 10;

  let wsGrid = [];
  let wsSelectedCells = [];
  let wsFoundWords = new Set();

  function generateGrid(size) {
    return Array(size).fill(null).map(() => Array(size).fill(''));
  }

  function placeWord(grid, word) {
    const size = grid.length;
    const len = word.length;
    const directions = ['horizontal', 'vertical'];
    for(let tries = 0; tries < 1000; tries++) {
      const dir = directions[Math.floor(Math.random()*directions.length)];
      if(dir === 'horizontal') {
        const row = Math.floor(Math.random()*size);
        const col = Math.floor(Math.random()*(size-len));
        let canPlace = true;
        for(let i=0; i<len; i++){
          if(grid[row][col+i] !== '' && grid[row][col+i] !== word[i]){
            canPlace = false;
            break;
          }
        }
        if(canPlace) {
          for(let i=0; i<len; i++){
            grid[row][col+i] = word[i];
          }
          return true;
        }
      } else {
        // vertical
        const col = Math.floor(Math.random()*size);
        const row = Math.floor(Math.random()*(size-len));
        let canPlace = true;
        for(let i=0; i<len; i++){
          if(grid[row+i][col] !== '' && grid[row+i][col] !== word[i]){
            canPlace = false;
            break;
          }
        }
        if(canPlace){
          for(let i=0; i<len; i++){
            grid[row+i][col] = word[i];
          }
          return true;
        }
      }
    }
    return false;
  }

  function fillGridRandom(grid) {
    const letters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
    for(let r=0; r<grid.length; r++){
      for(let c=0; c<grid[r].length; c++){
        if(grid[r][c]===''){
          grid[r][c] = letters.charAt(Math.floor(Math.random()*letters.length));
        }
      }
    }
  }

  function renderGrid() {
    wordsearchGridDiv.innerHTML = '';
    for(let r=0; r<wsGrid.length; r++) {
      for(let c=0; c<wsGrid[r].length; c++) {
        const cell = document.createElement('div');
        cell.className = 'ws-cell';
        cell.textContent = wsGrid[r][c];
        cell.dataset.row = r;
        cell.dataset.col = c;
        cell.setAttribute('tabindex', '0');
        cell.setAttribute('role', 'button');
        cell.setAttribute('aria-label', `Letra ${wsGrid[r][c]}, linha ${r+1}, coluna ${c+1}`);
        cell.addEventListener('click', () => onSelectCell(cell));
        cell.addEventListener('keydown', e => {
          if(e.key === 'Enter' || e.key === ' ') {
            e.preventDefault();
            onSelectCell(cell);
          }
        });
        wordsearchGridDiv.appendChild(cell);
      }
    }
  }

  function renderWordList() {
    wordListDiv.innerHTML = '';
    wordSearchWords.forEach(w => {
      const span = document.createElement('span');
      span.textContent = w;
      span.id = 'word-' + w;
      span.setAttribute('aria-label', `Palavra a encontrar: ${w}`);
      wordListDiv.appendChild(span);
    });
  }

  function resetSelection() {
    wsSelectedCells.forEach(cell => cell.classList.remove('selected'));
    wsSelectedCells = [];
  }

  function checkWord(cells) {
    if(cells.length < 2) return null;
    const wordFormed = cells.map(c => c.textContent).join('');
    const wordRev = wordFormed.split('').reverse().join('');
    if(wordSearchWords.includes(wordFormed)) return wordFormed;
    if(wordSearchWords.includes(wordRev)) return wordRev;
    return null;
  }

  function onSelectCell(cell){
    if(wsSelectedCells.includes(cell)){
      resetSelection();
      return;
    }
    if(wsSelectedCells.length > 0) {
      const last = wsSelectedCells[wsSelectedCells.length-1];
      const dRow = Math.abs(parseInt(cell.dataset.row) - parseInt(last.dataset.row));
      const dCol = Math.abs(parseInt(cell.dataset.col) - parseInt(last.dataset.col));

      if(dRow > 1 || dCol > 1) return;
      if(wsSelectedCells.length > 1){
        const first = wsSelectedCells[0];
        const second = wsSelectedCells[1];
        const dRowOrigin = parseInt(second.dataset.row) - parseInt(first.dataset.row);
        const dColOrigin = parseInt(second.dataset.col) - parseInt(first.dataset.col);
        const dRowNew = parseInt(cell.dataset.row) - parseInt(last.dataset.row);
        const dColNew = parseInt(cell.dataset.col) - parseInt(last.dataset.col);

        if(dRowOrigin !== dRowNew || dColOrigin !== dColNew) return;
      }
    }
    wsSelectedCells.push(cell);
    cell.classList.add('selected');

    const foundWord = checkWord(wsSelectedCells);
    if(foundWord && !wsFoundWords.has(foundWord)) {
      wsFoundWords.add(foundWord);
      wsSelectedCells.forEach(c => {
        c.classList.remove('selected');
        c.classList.add('found');
        c.setAttribute('aria-disabled', 'true');
        c.tabIndex = -1;
      });
      const wordSpan = document.getElementById('word-' + foundWord);
      if(wordSpan) wordSpan.classList.add('found');
      resetSelection();

      if(wsFoundWords.size === wordSearchWords.length) {
        setTimeout(() => alert("Parabéns! Você encontrou todas as palavras!"), 200);
      }
    }
  }

  function startWordSearch(){
    wsGrid = generateGrid(gridSize);
    wordSearchWords.forEach(w => placeWord(wsGrid, w));
    fillGridRandom(wsGrid);
    renderGrid();
    renderWordList();
    wsFoundWords.clear();
    wsSelectedCells = [];
    toggleVisibility(wordSearchGame, true);
    // Focus the first grid cell on load for accessibility
    setTimeout(() => {
      const firstCell = wordsearchGridDiv.querySelector('.ws-cell');
      if(firstCell) firstCell.focus();
    }, 250);
  }

  // ----------------- INITIAL LOAD -----------------
  window.onload = () => {
    startQuiz();
  };
</script>
</body>
</html>

